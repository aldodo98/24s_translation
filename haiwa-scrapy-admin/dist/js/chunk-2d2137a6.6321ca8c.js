(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2137a6"],{ad9f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",flex:"1 1 auto"}},[a("page-header-wrapper",{staticStyle:{"padding-bottom":"5px"}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"Has ProductId"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":""},on:{change:e.onHasProductIdChange},model:{value:e.hasProductId,callback:function(t){e.hasProductId=t},expression:"hasProductId"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"true"}},[e._v("true")]),a("a-select-option",{attrs:{value:"false"}},[e._v("false")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"Enabled"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":""},on:{change:e.onEnableChange},model:{value:e.isEnabled,callback:function(t){e.isEnabled=t},expression:"isEnabled"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"true"}},[e._v("true")]),a("a-select-option",{attrs:{value:"false"}},[e._v("false")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"TaskStatus"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":""},on:{change:e.filterData},model:{value:e.taskStatus,callback:function(t){e.taskStatus=t},expression:"taskStatus"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"Waiting"}},[e._v("Waiting")]),a("a-select-option",{attrs:{value:"Prepare"}},[e._v("Prepare")]),a("a-select-option",{attrs:{value:"Finish"}},[e._v("Finish")]),a("a-select-option",{attrs:{value:"Trigered"}},[e._v("Trigered")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"Status"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":""},on:{change:e.filterData},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"New"}},[e._v("New")]),a("a-select-option",{attrs:{value:"Deleted"}},[e._v("Deleted")]),a("a-select-option",{attrs:{value:"Active"}},[e._v("Active")]),a("a-select-option",{attrs:{value:"Changed"}},[e._v("Changed")])],1)],1)],1)],1)],1)],1)])],1),a("button",{on:{click:function(t){return e.enableSelectedRows()}}},[e._v("Enable Selected Rows")]),a("button",{on:{click:function(t){return e.disableSelectedRows()}}},[e._v("Disable Selected Rows")]),a("button",{on:{click:function(t){return e.runSelectedRows()}}},[e._v("Run Selected Rows")]),a("ag-grid-vue",{ref:"grid",staticClass:"ag-theme-alpine",staticStyle:{width:"99%",height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,defaultColDef:e.defaultColDef,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"ag-status-name-value"},[a("span",[e._v("Row Count :")]),a("span",[e._v(e._s(e.count))])]),a("udpate-form",{ref:"UpdateCategoryAndMenuIdForm",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},l=[],i=(a("4de4"),a("d81d"),a("d3b7"),a("25f0"),a("401b")),s=a("5ed6"),r=a("c189"),o=a("c1df"),d=a.n(o),c={name:"ProductTask",data:function(){return{hasProductId:"",isEnabled:"",taskStatus:"",status:"",advanced:!1,queryParam:{},visible:!1,confirmLoading:!1,mdl:null,columnDefs:null,rowData:null,rowDataCache:null,gridApi:null,columnApi:null,defaultColDef:null,autoGroupColumnDef:null,count:0,selectedRowKeys:[],selectedRows:[]}},components:{AgGridVue:i["AgGridVue"],"udpate-form":r["a"]},filters:{productIdFilter:function(e){return null}},methods:{filterData:function(){var e=this,t=this.rowDataCache;"true"===this.hasProductId&&(t=t.filter((function(e){return null!==e.productId}))),"false"===this.hasProductId&&(t=t.filter((function(e){return null===e.productId}))),"true"===this.isEnabled&&(t=t.filter((function(e){return e.enabled}))),"false"===this.isEnabled&&(t=t.filter((function(e){return!1===e.enabled}))),""!==this.taskStatus&&(t=t.filter((function(t){return t.taskStatus===e.taskStatus}))),""!==this.status&&(t=t.filter((function(t){return t.status===e.status}))),this.rowData=t,this.count=t.length},onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi},getSelectedTaskIds:function(){var e=this.gridApi.getSelectedNodes(),t=e.map((function(e){return e.data})),a=t.map((function(e){return e.id}));return a},enableSelectedRows:function(){var e=this,t=this.getSelectedTaskIds();if(t.length>0){var a={TaskIds:t,Enable:!0};this.confirmLoading=!0,Object(s["c"])(a).then((function(t){e.confirmLoading=!1,e.reloadData(),e.$message.info("enable 成功")}))}else this.$message.warning("You need to select the rows to enable")},disableSelectedRows:function(){var e=this,t=this.getSelectedTaskIds();if(t.length>0){var a={TaskIds:t,Enable:!1};this.confirmLoading=!0,Object(s["c"])(a).then((function(t){e.confirmLoading=!1,e.reloadData(),e.$message.info("disable 成功")}))}else this.$message.warning("You need to select the rows to disable")},runSelectedRows:function(){var e=this,t=this.getSelectedTaskIds();if(t.length>0){var a={TaskIds:t.toString()};this.confirmLoading=!0,Object(s["i"])(a).then((function(t){e.confirmLoading=!1,e.reloadData(),e.$message.info("run 成功")}))}else this.$message.warning("You need to select the rows to run")},reloadData:function(){var e=this;this.confirmLoading=!0,Object(s["e"])().then((function(t){e.rowDataCache=t,e.filterData(),e.confirmLoading=!1}))},handleCancel:function(){this.visible=!1;var e=this.$refs.UpdateCategoryAndMenuIdForm.form;e.resetFields()},handleOk:function(){var e=this,t=this.$refs.UpdateCategoryAndMenuIdForm.form;this.confirmLoading=!0,t.validateFields((function(t,a){t&&(e.confirmLoading=!1)}))},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:d()(new Date)}},onHasProductIdChange:function(){this.filterData()},onNoProductIdChange:function(){this.filterData()},onEnableChange:function(){this.filterData()},onTaskStatusChange:function(){this.filterData()}},beforeMount:function(){this.columnDefs=[{headerName:"id",field:"id",checkboxSelection:!0,width:"150",headerCheckboxSelection:!0},{headerName:"ProductId",field:"productId",filter:!0,width:"150"},{headerName:"Enabled",field:"enabled",filter:!0},{headerName:"Task Status",field:"taskStatus",filter:!0},{headerName:"Status",field:"status",filter:!0},{headerName:"project",field:"projectName",width:"100",filter:!0},{headerName:"TreeId",field:"categoryTreeId",filter:!0,width:"300"},{headerName:"Url",field:"productUrl",filter:!0,width:"300"},{headerName:"Price",field:"price",filter:!0,width:"300"},{headerName:"Seconds",field:"seconds",filter:!0,width:"300"},{headerName:"Create",field:"createDateTime"},{headerName:"Update",field:"updateDateTime"}],this.defaultColDef={resizable:!0},this.autoGroupColumnDef={headerName:"Model",field:"model",cellRenderer:"agGroupCellRenderer",cellRendererParams:{checkbox:!0}},this.reloadData()}},u=c,f=a("2877"),h=Object(f["a"])(u,n,l,!1,null,null,null);t["default"]=h.exports}}]);